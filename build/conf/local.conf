
# Infrabase - Main configuration

BB_NUMBER_THREADS = "20"

# Target physical/emulated hardware  

# IB_PLATFORM ?= "virt32"
IB_PLATFORM ?= "virt64"
# IB_PLATFORM ?= "rpi4"
# IB_PLATFORM ?= "rpi4_64"

# IB_PLATFORM ?= "x86-qemu"

# Linux General Configuration
 
# Available configurations 
IB_LINUX_CONFIG:x86-pc ?= "x86_defconfig"
IB_LINUX_CONFIG:x86-qemu ?= "x86_qemu_defconfig"

# QEMU/virt64 configuration
#IB_LINUX_CONFIG:virt64 ?= "virt64_defconfig"
IB_LINUX_CONFIG:virt64 ?= "virt64_defconfig"

PREFERRED_VERSION_linux:virt32 = "6.12"
PREFERRED_VERSION_linux:virt64 = "6.12"
PREFERRED_VERSION_linux:x86-qemu = "6.12"
 
# Preferred version for rootfs

# When the rootfs is fully built and user apps are deployed in int

PREFERRED_VERSION_rootfs-linux:virt64 = "1.0"
PREFERRED_VERSION_rootfs-linux:x86-qemu = "1.0"
PREFERRED_VERSION_buildroot:virt64 = "2024.11"

# Main ITS configuration
IB_LINUX_ITS:virt64 ?= "virt64"
#IB_LINUX_ITS:virt64 ?= "virt64_avz"

# Preferred version for bsp

# To deploy from the host to the target via ssh/scp
PREFERRED_VERSION_bsp-linux:x86-qemu = "1.0"
PREFERRED_VERSION_bsp-linux:virt64 = "1.0"

# U-boot bootloader
PREFERRED_VERSION_uboot:virt64 = "2022.04"

PREFERRED_VERSION_usr-linux:x86-qemu = "1.0"
PREFERRED_VERSION_usr-linux:virt64 = "1.0"

PREFERRED_VERSION_linux = "${PREFERRED_VERSION_linux:${IB_PLATFORM}}"

# SO3 General Configuration

# Using the most recent version
PREFERRED_VERSION_so3:virt64 = "6.1.0"

# Configuration for SO3

IB_SO3_PLATFORM ?= "virt64"

IB_SO3_CONFIG:virt64 ?= "virt64_defconfig"

# Main ITS configuration
IB_SO3_ITS:virt64 ?= "virt64"

# AVZ hypervisor General Configuration
PREFERRED_VERSION_avz:virt64 = "6.1.0"
IB_AVZ_CONFIG:virt64 ?= "virt64_avz_defconfig"

# Type of deployment (soft for virtual storage, hard for target hardware)

IB_STORAGE ?= "soft"
# IB_STORAGE ?= "hard"
# IB_STORAGE ?= "remote"

# When deployed locally (for example on the PC where the build system is running)
# IB_STORAGE ?= "local"

# Size of the rootfs partition
IB_ROOTFS_SIZE ?= "2G"

# Target partition for the main rootfs

IB_ROOTFS_PARTITION:virt32 = "p2"
IB_ROOTFS_PARTITION:virt64 = "p2"
IB_ROOTFS_PARTITION:rpi4 = "p2"
IB_ROOTFS_PARTITION:rpi4_64 = "p2"

IB_ROOTFS_PARTITION:x86-qemu = "p1"

IB_ROOTFS_PATH:linux = "${IB_DIR}/linux/rootfs"
IB_ROOTFS_PATH:so3 = "${IB_DIR}/so3/rootfs"

# Possible hardware device for deployment
# !! BE VERY CAREFUL WITH THIS VARIABLE !!

IB_DEVICE:rpi4 = "mmcblk0"
IB_DEVICE:rpi4_64 = "mmcblk0"

IB_ROOTFS_METHOD ?= "buildroot"
# IB_ROOTFS_METHOD ?= "debootstrap"

# CPU core and toolchain according to the platform

IB_PLAT_CPU:virt32 = "arm"
IB_PLAT_CPU:rpi4 = "arm"

IB_PLAT_CPU:virt64 = "aarch64"
IB_PLAT_CPU:rpi4_64 = "aarch64"

IB_PLAT_CPU:x86-qemu = "x86"

IB_TOOLCHAIN:arm = "arm-linux-gnueabihf"
IB_TOOLCHAIN:aarch64 = "aarch64-linux-gnu"
 
# Debug options
# IB_USR_BUILD_TYPE = "Release"
IB_USR_BUILD_TYPE = "Debug"

# This will be used in the future 
# ARM Trusted Firmware platform
# IB_ATF_PLAT = "imx8qx"

BB_NO_NETWORK_SANDBOX = "1"
BB_WARN_ONLY = "true"


